"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var registerBlockType=wp.blocks.registerBlockType,_wp$blockEditor=wp.blockEditor,useBlockProps=_wp$blockEditor.useBlockProps,InspectorControls=_wp$blockEditor.InspectorControls,_wp$components=wp.components,PanelBody=_wp$components.PanelBody,SelectControl=_wp$components.SelectControl,ToggleControl=_wp$components.ToggleControl,useSelect=wp.data.useSelect,__=wp.i18n.__;registerBlockType("page-hierarchy-block/main",{title:"Parent & Child Pages",icon:"list-view",category:"widgets",attributes:{selectedPageId:{type:"number",default:0},listType:{type:"string",default:"ul"},hideParentPage:{type:"boolean",default:!1}},edit:function(e){var t=e.attributes,n=e.setAttributes,r=useBlockProps(),a=useSelect((function(e){try{return e("core").getEntityRecords("postType","page",{per_page:-1})}catch(e){return console.error("Error fetching pages:",e),[]}}),[]),l=null==a?void 0:a.find((function(e){return e.id===t.selectedPageId})),o=null==a?void 0:a.filter((function(e){return e.parent===t.selectedPageId})),i=[{label:__("Select a page"),value:0}];return Array.isArray(a)&&(i=[].concat(_toConsumableArray(i),_toConsumableArray(a.map((function(e){return{label:e.title.rendered,value:e.id}}))))),React.createElement("div",r,React.createElement(InspectorControls,null,React.createElement(PanelBody,{title:__("Page Selection")},React.createElement(SelectControl,{label:__("Select Parent Page"),value:t.selectedPageId,options:i,onChange:function(e){n({selectedPageId:parseInt(e)})}}),React.createElement(ToggleControl,{label:__("Hide Parent Page"),checked:t.hideParentPage,onChange:function(e){return n({hideParentPage:e})}}),React.createElement(SelectControl,{label:__("List Type"),value:t.listType,options:[{label:__("Unordered List (UL)"),value:"ul"},{label:__("Ordered List (OL)"),value:"ol"}],onChange:function(e){return n({listType:e})}}))),React.createElement("div",{className:"page-hierarchy-block"},null===a?React.createElement("p",null,__("Loading pages...")):0===a.length?React.createElement("p",null,__("No pages found.")):l?React.createElement(React.Fragment,null,!t.hideParentPage&&React.createElement("h2",null,l.title.rendered),o&&o.length>0?"ul"===t.listType?React.createElement("ul",null,o.map((function(e){return React.createElement("li",{key:e.id},e.title.rendered)}))):React.createElement("ol",null,o.map((function(e){return React.createElement("li",{key:e.id},e.title.rendered)}))):React.createElement("p",null,__("No child pages found."))):React.createElement("p",null,__("Please select a parent page."))))},save:function(){return null}}),registerBlockType("page-hierarchy-block/sibling-navigation",{title:"Page Sibling Navigation",icon:"admin-links",category:"widgets",attributes:{usePageOrder:{type:"boolean",default:!1},navigationType:{type:"string",default:"both"},useParentAsPrevious:{type:"boolean",default:!1},useNextTopicAsNext:{type:"boolean",default:!1}},edit:function(e){var t=e.attributes,n=e.setAttributes,r=useBlockProps(),a=(useSelect((function(e){return e("core/editor").getCurrentPostId()}),[]),useSelect((function(e){var t=e("core/editor").getCurrentPost();return t?t.parent:0}),[]));return console.log("useNextTopicAsNext:",t.useNextTopicAsNext),React.createElement("div",r,React.createElement(InspectorControls,null,React.createElement(PanelBody,{title:__("Navigation Settings")},React.createElement(ToggleControl,{label:__("Use Page Order"),checked:t.usePageOrder,onChange:function(e){return n({usePageOrder:e})}}),React.createElement(SelectControl,{label:__("Navigation Type"),value:t.navigationType,options:[{label:__("Previous and Next"),value:"both"},{label:__("Previous Only"),value:"previous"},{label:__("Next Only"),value:"next"}],onChange:function(e){return n({navigationType:e})}}),React.createElement(ToggleControl,{label:__("Use Parent as Previous"),help:__("If there is no previous sibling, use the parent page as the previous link"),checked:t.useParentAsPrevious,onChange:function(e){return n({useParentAsPrevious:e})}}),React.createElement(ToggleControl,{label:__("Use Next Topic as Next"),help:__("If there is no next sibling, use the next topic (parent's next sibling) as the next link"),checked:t.useNextTopicAsNext,onChange:function(e){return n({useNextTopicAsNext:e})}}))),React.createElement("div",{className:"wp-block-page-sibling-navigation"},a?React.createElement("p",null,__("Sibling navigation will be displayed here.")):React.createElement("p",null,__("This page has no parent. Sibling navigation is not applicable."))))},save:function(){return null}});
//# sourceMappingURL=index.js.map